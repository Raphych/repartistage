"use strict";(self.webpackChunkstages=self.webpackChunkstages||[]).push([[532],{532:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var n=s(43),r=s(238),l=s(579);function i(e){let{data:t,setData:s}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{type:"file",accept:".xlsx, .xls",onChange:function(e){const t=e.target.files[0],n=new FileReader;n.onload=e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.result,l=r.LF(n,{type:"array"}),i=l.SheetNames[0],a=l.Sheets[i],c=r.Wp.sheet_to_json(a);c&&c.length>0&&s(c)},n.readAsArrayBuffer(t)}}),(0,l.jsx)("div",{className:"table-container",children:t.length>0&&(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:Object.keys(t[0]).map((e=>(0,l.jsx)("th",{children:e},e)))})}),(0,l.jsx)("tbody",{children:t.slice(0,10).map(((e,t)=>(0,l.jsx)("tr",{children:Object.values(e).map(((e,t)=>(0,l.jsx)("td",{children:e},t)))},t)))})]})})]})}function a(e){let{onClick:t,type:s="button",className:n="",disabled:r=!1,children:i=""}=e;return(0,l.jsx)("button",{type:s,onClick:t,className:"btn ".concat(n),disabled:r,children:i})}var c=s(373),d=s.n(c);function o(e){let{matrix:t,array:s,columns:r,ids:i,options:c}=e;const[o,h]=(0,n.useState)([]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a,{onClick:function(){const e=d()(t);h(e)},type:"button",className:"btn-primary",children:"Assigner"}),(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"#"}),(0,l.jsx)("th",{children:"ID"}),(0,l.jsx)("th",{children:"Choice"}),(0,l.jsx)("th",{children:"Preference"})]})}),(0,l.jsx)("tbody",{children:o.map(((e,s)=>{let[n,r]=e;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:s+1}),(0,l.jsx)("td",{children:i[n]}),(0,l.jsx)("td",{children:c[r]}),(0,l.jsx)("td",{children:t[n][r]})]},s)}))})]})]})}function h(e){var t;let{array:s,setMatrix:n,columns:r,setColumns:i,setIds:c,setOptions:d}=e;return s&&0!==s.length?(0,l.jsxs)("div",{children:[(0,l.jsx)("table",{children:(0,l.jsx)("tbody",{children:null===(t=Object.keys(s[0]))||void 0===t?void 0:t.map(((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e}),(0,l.jsx)("td",{children:(0,l.jsxs)("select",{name:"col",value:r[e]||"",onChange:t=>{return s=e,n=t.target.value,void i((e=>({...e,[s]:n})));var s,n},children:[(0,l.jsx)("option",{value:""}),(0,l.jsx)("option",{value:"id",children:"ID"}),(0,l.jsx)("option",{value:"offre",children:"Offre"}),(0,l.jsx)("option",{value:"preference",children:"Preference"}),(0,l.jsx)("option",{value:"multiplicator",children:"Multiplicateur"})]})})]},t)))})}),(0,l.jsx)(a,{type:"button",onClick:function(){const e=Object.keys(r).find((e=>"id"===r[e])),t=Object.keys(r).find((e=>"offre"===r[e])),l=Object.keys(r).find((e=>"preference"===r[e])),i=Object.keys(r).find((e=>"multiplicator"===r[e]));if(!e||!t||!l)return void alert("Please assign roles to all columns.");const a=Array.from(new Set(s.map((t=>t[e])))),o=new Map;s.forEach((e=>{const s=e[t],n=i&&parseInt(e[i])||1;o.has(s)||o.set(s,n)}));let h=[];o.forEach(((e,t)=>{for(let s=0;s<e;s++)h.push(t)}));const u=Array(a.length).fill(0).map((()=>Array(h.length).fill(999999)));s.forEach((s=>{const n=a.indexOf(s[e]);for(let e=0;e<h.length;e++)h[e]===s[t]&&(u[n][e]=parseFloat(s[l]))})),c(a),d(h),n(u)},children:"Cr\xe9er la matrice"})]}):(0,l.jsx)("div",{children:"Upload xlsx file"})}function u(){const[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)([]),[a,c]=(0,n.useState)([]),[d,u]=(0,n.useState)({}),[x,j]=(0,n.useState)([]);return console.log(x),(0,l.jsxs)("div",{children:[(0,l.jsx)(i,{data:e,setData:t}),(0,l.jsx)(h,{array:e,setMatrix:j,columns:d,setColumns:u,setIds:r,setOptions:c}),(0,l.jsx)(o,{matrix:x,array:e,columns:d,ids:s,options:a})]})}}}]);
//# sourceMappingURL=532.bb8b5df6.chunk.js.map