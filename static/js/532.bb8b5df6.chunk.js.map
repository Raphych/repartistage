{"version":3,"file":"static/js/532.bb8b5df6.chunk.js","mappings":"0JAOe,SAASA,EAAWC,GAAuC,IAAtC,KAAEC,EAAI,QAAEC,GAA2BF,EAmBnE,OACIG,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAOC,KAAK,OAAOC,OAAO,cAAcC,SAnBhD,SAA0BC,GACtB,MAAMC,EAAOD,EAAME,OAAOC,MAAM,GAC1BC,EAAS,IAAIC,WAEnBD,EAAOE,OAAUC,IAAO,IAADC,EACnB,MAAMC,EAAsB,QAAXD,EAAGD,EAAEL,cAAM,IAAAM,OAAA,EAARA,EAAUE,OACxBC,EAAWC,EAAAA,GAAUH,EAAa,CAAEZ,KAAM,UAC1CgB,EAAiBF,EAASG,WAAW,GACrCC,EAAYJ,EAASK,OAAOH,GAC5BI,EAAWL,EAAAA,GAAWM,cAAcH,GACtCE,GAAYA,EAASE,OAAS,GAC9B1B,EAAQwB,EAAS,EAGzBb,EAAOgB,kBAAkBnB,EAC7B,KAKQL,EAAAA,EAAAA,KAAA,OAAKyB,UAAU,kBAAiB1B,SAC3BH,EAAK2B,OAAS,IACXzB,EAAAA,EAAAA,MAAA,SAAAC,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAAD,UACIC,EAAAA,EAAAA,KAAA,MAAAD,SACK2B,OAAOC,KAAK/B,EAAK,IAAIgC,KAAKC,IACvB7B,EAAAA,EAAAA,KAAA,MAAAD,SAAe8B,GAANA,UAIrB7B,EAAAA,EAAAA,KAAA,SAAAD,SACKH,EAAKkC,MAAM,EAAE,IAAIF,KAAI,CAACG,EAAKC,KACxBhC,EAAAA,EAAAA,KAAA,MAAAD,SACK2B,OAAOO,OAAOF,GAAKH,KAAI,CAACM,EAAWC,KAChCnC,EAAAA,EAAAA,KAAA,MAAAD,SAAamC,GAAJC,MAFRH,cAYzC,CC3Ce,SAASI,EAAMzC,GAA8F,IAA7F,QAAE0C,EAAO,KAAEpC,EAAO,SAAQ,UAAEwB,EAAY,GAAE,SAAEa,GAAW,EAAK,SAAEvC,EAAW,IAAiBJ,EACrH,OACIK,EAAAA,EAAAA,KAAA,UAAQC,KAAMA,EAAMoC,QAASA,EAASZ,UAAS,OAAAc,OAASd,GAAaa,SAAUA,EAASvC,SACnFA,GAGb,C,sBCZe,SAASyC,EAAS7C,GAA4C,IAA3C,OAAE8C,EAAM,MAAEC,EAAK,QAAEC,EAAO,IAAEC,EAAG,QAAEC,GAASlD,EAEtE,MAAOmB,EAAQgC,IAAaC,EAAAA,EAAAA,UAAS,IAOrC,OACIjD,EAAAA,EAAAA,MAAAkD,EAAAA,SAAA,CAAAjD,SAAA,EACEC,EAAAA,EAAAA,KAACoC,EAAM,CAACC,QAPd,WACI,MAAMY,EAAMC,IAAUT,GACtBK,EAAUG,EACd,EAIoChD,KAAK,SAASwB,UAAU,cAAa1B,SAAC,cACpED,EAAAA,EAAAA,MAAA,SAAAC,SAAA,EACEC,EAAAA,EAAAA,KAAA,SAAAD,UACED,EAAAA,EAAAA,MAAA,MAAAC,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,OACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,QACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,YACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,qBAGRC,EAAAA,EAAAA,KAAA,SAAAD,SACGe,EAAOc,KAAI,CAAAuB,EAAanB,KAAK,IAAhBD,EAAKqB,GAAID,EAAA,OACrBrD,EAAAA,EAAAA,MAAA,MAAAC,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAAD,SAAKiC,EAAQ,KACbhC,EAAAA,EAAAA,KAAA,MAAAD,SAAK6C,EAAIb,MACT/B,EAAAA,EAAAA,KAAA,MAAAD,SAAK8C,EAAQO,MACbpD,EAAAA,EAAAA,KAAA,MAAAD,SAAK0C,EAAOV,GAAKqB,OAJVpB,EAKJ,WAMrB,CCzBe,SAASqB,EAAW1D,GAA8F,IAAD2D,EAAA,IAA1FZ,MAAOa,EAAS,UAAEC,EAAS,QAAEb,EAAO,WAAEc,EAAU,OAAEC,EAAM,WAAEC,GAA8BhE,EAkE1H,OAAK4D,GAAkC,IAArBA,EAAUhC,QAKxBzB,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAAD,UACIC,EAAAA,EAAAA,KAAA,SAAAD,SAGiC,QAHjCuD,EAGQ5B,OAAOC,KAAK4B,EAAU,WAAG,IAAAD,OAAA,EAAzBA,EAA2B1B,KAAI,CAACwB,EAAKpB,KACjClC,EAAAA,EAAAA,MAAA,MAAAC,SAAA,EACIC,EAAAA,EAAAA,KAAA,MAAAD,SAAKqD,KACLpD,EAAAA,EAAAA,KAAA,MAAAD,UACID,EAAAA,EAAAA,MAAA,UACI8D,KAAK,MACLC,MAAOlB,EAAQS,IAAQ,GACvBjD,SAAWQ,IAAMmD,OAjFrBC,EAiF4CX,EAjFxBY,EAiF6BrD,EAAEL,OAAOuD,WAhFtFJ,GAAYQ,IAAW,IAChBA,EACH,CAACF,GAAaC,MAHtB,IAAgCD,EAAoBC,CAiF6C,EAAAjE,SAAA,EAE7DC,EAAAA,EAAAA,KAAA,UAAQ6D,MAAO,MACf7D,EAAAA,EAAAA,KAAA,UAAQ6D,MAAO,KAAK9D,SAAC,QACrBC,EAAAA,EAAAA,KAAA,UAAQ6D,MAAO,QAAQ9D,SAAC,WACxBC,EAAAA,EAAAA,KAAA,UAAQ6D,MAAO,aAAa9D,SAAC,gBAC7BC,EAAAA,EAAAA,KAAA,UAAQ6D,MAAO,gBAAgB9D,SAAC,0BAZnCiC,UAoBzBhC,EAAAA,EAAAA,KAACoC,EAAM,CAACnC,KAAK,SAASoC,QAvF9B,WAEI,MAAM6B,EAAQxC,OAAOC,KAAKgB,GAASwB,MAAMf,GAAyB,OAAjBT,EAAQS,KACnDgB,EAAW1C,OAAOC,KAAKgB,GAASwB,MAAMf,GAAyB,UAAjBT,EAAQS,KACtDiB,EAAgB3C,OAAOC,KAAKgB,GAASwB,MAAMf,GAAyB,eAAjBT,EAAQS,KAC3DkB,EAAmB5C,OAAOC,KAAKgB,GAASwB,MAAMf,GAAyB,kBAAjBT,EAAQS,KAKpE,IAAKc,IAAUE,IAAaC,EAExB,YADAE,MAAM,uCAKV,MAAMC,EAAYC,MAAMC,KAAK,IAAIC,IAAIpB,EAAU3B,KAAKG,GAAQA,EAAImC,OAG1DU,EAAW,IAAIC,IACrBtB,EAAUuB,SAAS/C,IACf,MAAMgD,EAAQhD,EAAIqC,GACZY,EAAgBV,GAAmBW,SAASlD,EAAIuC,KAA0B,EAC3EM,EAASM,IAAIH,IACdH,EAASO,IAAIJ,EAAOC,EACxB,IAIJ,IAAII,EAAsB,GAC1BR,EAASE,SAAQ,CAACE,EAAeD,KAC7B,IAAK,IAAI5C,EAAI,EAAGA,EAAI6C,EAAe7C,IAC/BiD,EAAUC,KAAKN,EACnB,IAIJ,MAAMtC,EAASgC,MAAMD,EAAUjD,QAC1B+D,KAAK,GACL1D,KAAI,IAAM6C,MAAMW,EAAU7D,QAAQ+D,KAAK,UAE5C/B,EAAUuB,SAAS/C,IACf,MAAMwD,EAAUf,EAAUgB,QAAQzD,EAAImC,IACtC,IAAK,IAAI/B,EAAI,EAAGA,EAAIiD,EAAU7D,OAAQY,IAC9BiD,EAAUjD,KAAOJ,EAAIqC,KACrB3B,EAAO8C,GAASpD,GAAKsD,WAAW1D,EAAIsC,IAE5C,IAGJX,EAAOc,GACPb,EAAWyB,GACX5B,EAAUf,EACd,EAkCoD1C,SAAC,4BA9B1CC,EAAAA,EAAAA,KAAA,OAAAD,SAAK,oBAiCpB,CC5Ge,SAAS2F,IAEpB,MAAO9F,EAAMC,IAAWkD,EAAAA,EAAAA,UAAgB,KACjCH,EAAKc,IAAUX,EAAAA,EAAAA,UAAgB,KAC/BF,EAASc,IAAcZ,EAAAA,EAAAA,UAAgB,KACvCJ,EAASc,IAAcV,EAAAA,EAAAA,UAAqC,CAAC,IAC7DN,EAAQe,IAAaT,EAAAA,EAAAA,UAAqB,IAIjD,OAFA4C,QAAQC,IAAInD,IAGR3C,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACIC,EAAAA,EAAAA,KAACN,EAAW,CAACE,KAAMA,EAAMC,QAASA,KAClCG,EAAAA,EAAAA,KAACqD,EAAW,CAACX,MAAO9C,EAAM4D,UAAWA,EAAWb,QAASA,EAASc,WAAYA,EAAYC,OAAQA,EAAQC,WAAYA,KACtH3D,EAAAA,EAAAA,KAACwC,EAAS,CAACC,OAAQA,EAAQC,MAAO9C,EAAM+C,QAASA,EAASC,IAAKA,EAAKC,QAASA,MAGzF,C","sources":["components/datas/ExcelReader.tsx","components/ui/buttons/Button.tsx","components/datas/Hungarian.jsx","components/datas/MatrixMaker.tsx","pages/Home.tsx"],"sourcesContent":["import * as XLSX from 'xlsx';\r\n\r\ninterface ExcelReaderProps {\r\n    data: any[]\r\n    setData: (datas: any[]) => void;\r\n}\r\n\r\nexport default function ExcelReader({ data, setData }: ExcelReaderProps) {\r\n\r\n    function handleFileUpload(event: any) {\r\n        const file = event.target.files[0];\r\n        const reader = new FileReader();\r\n\r\n        reader.onload = (e) => {\r\n            const arrayBuffer = e.target?.result;\r\n            const workbook = XLSX.read(arrayBuffer, { type: 'array' });\r\n            const firstSheetName = workbook.SheetNames[0];\r\n            const worksheet = workbook.Sheets[firstSheetName];\r\n            const jsonData = XLSX.utils.sheet_to_json(worksheet);\r\n            if (jsonData && jsonData.length > 0)\r\n                setData(jsonData);\r\n        };\r\n\r\n        reader.readAsArrayBuffer(file);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <input type=\"file\" accept=\".xlsx, .xls\" onChange={handleFileUpload} />\r\n            <div className='table-container'>\r\n                {data.length > 0 && (\r\n                    <table>\r\n                        <thead>\r\n                            <tr>\r\n                                {Object.keys(data[0]).map((key) => (\r\n                                    <th key={key}>{key}</th>\r\n                                ))}\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {data.slice(0,10).map((row, index) => (\r\n                                <tr key={index}>\r\n                                    {Object.values(row).map((cell: any, i) => (\r\n                                        <td key={i}>{cell}</td>\r\n                                    ))}\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};","import { ReactNode } from \"react\";\r\n\r\ninterface ButtonProps {\r\n    children: string | ReactNode;\r\n    onClick?: () => void;\r\n    type?: \"button\" | \"submit\" | \"reset\";\r\n    className?: string;\r\n    disabled?: boolean;\r\n}\r\n\r\nexport default function Button({ onClick, type = \"button\", className = \"\", disabled = false, children = \"\" }: ButtonProps) {\r\n    return (\r\n        <button type={type} onClick={onClick} className={`btn ${className}`} disabled={disabled}>\r\n            {children}\r\n        </button>\r\n    )\r\n}","import { useState } from \"react\";\r\nimport Button from \"../ui/buttons/Button\";\r\nimport hungarian from \"hungarian-on3\";\r\n\r\nexport default function Hungarian({ matrix, array, columns, ids, options }) {\r\n\r\n    const [result, setResult] = useState([]);\r\n\r\n    function handleClick() {\r\n        const res = hungarian(matrix);\r\n        setResult(res)\r\n    }\r\n\r\n    return (\r\n        <>\r\n          <Button onClick={handleClick} type=\"button\" className=\"btn-primary\">Assigner</Button>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>#</th>\r\n                <th>ID</th>\r\n                <th>Choice</th>\r\n                <th>Preference</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {result.map(([row, col], index) => (\r\n                <tr key={index}>\r\n                  <td>{index + 1}</td>\r\n                  <td>{ids[row]}</td>\r\n                  <td>{options[col]}</td>\r\n                  <td>{matrix[row][col]}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </>\r\n      );\r\n}","import Button from \"../ui/buttons/Button\";\r\n\r\ninterface MatrixMakerProps {\r\n    array: any[];\r\n    setMatrix: (matrix: number[][]) => void;\r\n    columns: { [key: string]: string; };\r\n    setColumns: React.Dispatch<React.SetStateAction<{\r\n        [key: string]: string;\r\n    }>>;\r\n    setIds: React.Dispatch<React.SetStateAction<any[]>>\r\n    setOptions: React.Dispatch<React.SetStateAction<any[]>>\r\n}\r\n\r\nexport default function MatrixMaker({ array: dataArray, setMatrix, columns, setColumns, setIds, setOptions }: MatrixMakerProps) {\r\n\r\n    function handleColumnRoleChange(columnName: string, role: string) {\r\n        setColumns((prevColumns) => ({\r\n            ...prevColumns,\r\n            [columnName]: role,\r\n        }));\r\n    };\r\n\r\n\r\n    function defineMatrix() {\r\n\r\n        const idCol = Object.keys(columns).find((col) => columns[col] === 'id');\r\n        const offerCol = Object.keys(columns).find((col) => columns[col] === 'offre');\r\n        const preferenceCol = Object.keys(columns).find((col) => columns[col] === 'preference');\r\n        const multiplicatorCol = Object.keys(columns).find((col) => columns[col] === 'multiplicator');\r\n\r\n\r\n\r\n\r\n        if (!idCol || !offerCol || !preferenceCol) {\r\n            alert('Please assign roles to all columns.');\r\n            return;\r\n        }\r\n\r\n        // Get unique IDs and choices\r\n        const uniqueIds = Array.from(new Set(dataArray.map((row) => row[idCol])));\r\n\r\n        // Get unique offers and their multiplicators\r\n        const offerMap = new Map();\r\n        dataArray.forEach((row) => {\r\n            const offer = row[offerCol];\r\n            const multiplicator = multiplicatorCol ? parseInt(row[multiplicatorCol]) || 1 : 1;\r\n            if (!offerMap.has(offer)) {\r\n                offerMap.set(offer, multiplicator);\r\n            }\r\n        });\r\n\r\n        // Expand offers based on multiplicators\r\n        let allOffers: string[] = [];\r\n        offerMap.forEach((multiplicator, offer) => {\r\n            for (let i = 0; i < multiplicator; i++) {\r\n                allOffers.push(offer);\r\n            }\r\n        });\r\n\r\n        // Initialize matrix with large values\r\n        const matrix = Array(uniqueIds.length)\r\n            .fill(0)\r\n            .map(() => Array(allOffers.length).fill(999999));\r\n\r\n        dataArray.forEach((row) => {\r\n            const idIndex = uniqueIds.indexOf(row[idCol]);\r\n            for (let i = 0; i < allOffers.length; i++) {\r\n                if (allOffers[i] === row[offerCol]) {\r\n                    matrix[idIndex][i] = parseFloat(row[preferenceCol]);\r\n                }\r\n            }\r\n        });\r\n\r\n        setIds(uniqueIds);\r\n        setOptions(allOffers);\r\n        setMatrix(matrix);\r\n    };\r\n\r\n\r\n    if (!dataArray || dataArray.length === 0) {\r\n        return <div>Upload xlsx file</div>;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <table>\r\n                <tbody>\r\n\r\n                    {\r\n                        Object.keys(dataArray[0])?.map((col, index) => (\r\n                            <tr key={index}>\r\n                                <td>{col}</td>\r\n                                <td>\r\n                                    <select\r\n                                        name=\"col\"\r\n                                        value={columns[col] || ''}\r\n                                        onChange={(e) => handleColumnRoleChange(col, e.target.value)}\r\n                                    >\r\n                                        <option value={''}></option>\r\n                                        <option value={'id'}>ID</option>\r\n                                        <option value={'offre'}>Offre</option>\r\n                                        <option value={'preference'}>Preference</option>\r\n                                        <option value={'multiplicator'}>Multiplicateur</option>\r\n                                    </select>\r\n                                </td>\r\n                            </tr>\r\n                        ))\r\n                    }\r\n                </tbody>\r\n            </table>\r\n            <Button type=\"button\" onClick={defineMatrix}>Créer la matrice</Button>\r\n        </div>\r\n    )\r\n}","import { useEffect, useState } from \"react\";\r\nimport ExcelReader from \"../components/datas/ExcelReader\";\r\nimport Hungarian from \"../components/datas/Hungarian\";\r\nimport MatrixMaker from \"../components/datas/MatrixMaker\";\r\n\r\nexport default function Home() {\r\n\r\n    const [data, setData] = useState<any[]>([])\r\n    const [ids, setIds] = useState<any[]>([]);\r\n    const [options, setOptions] = useState<any[]>([])\r\n    const [columns, setColumns] = useState<{ [key: string]: string; }>({});\r\n    const [matrix, setMatrix] = useState<number[][]>([])\r\n\r\n    console.log(matrix)\r\n\r\n    return (\r\n        <div>\r\n            <ExcelReader data={data} setData={setData} />\r\n            <MatrixMaker array={data} setMatrix={setMatrix} columns={columns} setColumns={setColumns} setIds={setIds} setOptions={setOptions} />\r\n            <Hungarian matrix={matrix} array={data} columns={columns} ids={ids} options={options} />\r\n        </div>\r\n    )\r\n}"],"names":["ExcelReader","_ref","data","setData","_jsxs","children","_jsx","type","accept","onChange","event","file","target","files","reader","FileReader","onload","e","_e$target","arrayBuffer","result","workbook","XLSX","firstSheetName","SheetNames","worksheet","Sheets","jsonData","sheet_to_json","length","readAsArrayBuffer","className","Object","keys","map","key","slice","row","index","values","cell","i","Button","onClick","disabled","concat","Hungarian","matrix","array","columns","ids","options","setResult","useState","_Fragment","res","hungarian","_ref2","col","MatrixMaker","_Object$keys","dataArray","setMatrix","setColumns","setIds","setOptions","name","value","handleColumnRoleChange","columnName","role","prevColumns","idCol","find","offerCol","preferenceCol","multiplicatorCol","alert","uniqueIds","Array","from","Set","offerMap","Map","forEach","offer","multiplicator","parseInt","has","set","allOffers","push","fill","idIndex","indexOf","parseFloat","Home","console","log"],"sourceRoot":""}